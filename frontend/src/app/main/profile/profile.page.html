<app-header></app-header>

<div class="body" style="overflow: scroll;" *ngIf="user">
  <ng-container *ngIf="editProfile==false; else edit">
    <div class="container rounded bg-white mt-5 mb-5">
      <div class="row">
        <div class="col-md-3 border-right">
          <div class="d-flex flex-column align-items-center text-center p-3 py-5"><img class="rounded-circle mt-5"
              width="150px"
              src="https://st2.depositphotos.com/4326917/9447/v/950/depositphotos_94471220-stock-illustration-user-icon-with-watercolor-effect.jpg"><span
              class="font-weight-bold">{{user.nombre}} {{user.apellido}}</span><span class="text-black-50">{{user.email}}</span><span>
            </span></div>
            <div class="row mt-3" style="text-align: center; border-style: dashed; padding: 5% 5%;">
              <div class="col-md-12"><label>ยก Danger Zone !</label></div>
              <div class="col-md-12"><ion-button color="danger" (click)="deleteUser()">Delete Account</ion-button></div>           
            </div>
        </div>
        <div class="col-md-9 border-right">
          <div class="p-3 py-5">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h4 class="text-right"><strong>Profile Settings</strong></h4>
            </div>
            <div class="row mt-2">
              <div class="col-md-6"><label class="labels">Name</label><input type="text" class="form-control"
                  placeholder="first name" value="{{user.nombre}}" disabled></div>
              <div class="col-md-6"><label class="labels">Surname</label><input type="text" class="form-control"
                  value="{{user.apellido}}" placeholder="surname" disabled></div>
            </div>
            <div class="row mt-3">
              <div class="col-md-12"><label class="labels">Date of Birth</label><input type="date" class="form-control"
                placeholder="enter phone number" value="{{user.fechaNacimiento}}" disabled></div>
              <div class="col-md-12"><label class="labels">Email</label><input type="email" class="form-control"
                  placeholder="enter phone number" value="{{user.email}}" disabled></div>           
            </div>
            <div class="row mt-3">
              <div class="col-md-9"><label class="labels">Password</label><input type="password" class="form-control"
                  placeholder="country" value="**************" disabled></div>
              <div class="col-md-3"><label class="labels"></label><ion-button style="white-space:normal !important;
                word-wrap:break-word;" color="warning" expand="block" disabled>Change Password</ion-button></div>
            </div>
            <div class="mt-5 text-center"><button class="btn btn-primary profile-button" type="button" (click)="editProfile = !editProfile">Edit Profile</button></div>
          </div>
        </div>    
      </div>
    </div>
  </ng-container>

  <ng-template #edit>
    <div class="container rounded bg-white mt-5 mb-5">
      <div class="row">
        <div class="col-md-3 border-right">
          <div class="d-flex flex-column align-items-center text-center p-3 py-5"><img class="rounded-circle mt-5"
              width="150px"
              src="https://st2.depositphotos.com/4326917/9447/v/950/depositphotos_94471220-stock-illustration-user-icon-with-watercolor-effect.jpg"><span
              class="font-weight-bold">{{user.nombre}} {{user.apellido}}</span><span class="text-black-50">{{user.email}}</span><span>
            </span></div>
            <div class="row mt-3" style="text-align: center; border-style: dashed; padding: 5% 5%;">
              <div class="col-md-12"><label>ยก Danger Zone !</label></div>
              <div class="col-md-12"><ion-button color="danger">Delete Account</ion-button></div>           
            </div>
        </div>
        <div class="col-md-9 border-right">
          <div class="p-3 py-5">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h4 class="text-right"><strong>Profile Settings</strong></h4>
            </div>
            <form #form="ngForm" (ngSubmit)="editUserProfile(form.value)" novalidate>
              <div class="row mt-2">
                <div class="col-md-6"><label class="labels">Name</label><input type="text" class="form-control"
                    placeholder="Name" name ="name" required [(ngModel)]="user.nombre" #n="ngModel"/></div>
                <div class="col-md-6"><label class="labels">Surname</label><input type="text" class="form-control"
                    placeholder="Surname" name ="surname" required [(ngModel)]="user.apellido" #n2="ngModel" ></div>
              </div>
              <div class="row mt-3">
                <div class="col-md-12"><label class="labels">Date of Birth</label><input type="date" class="form-control"
                  placeholder="enter date of birth" name ="dateOfBirth" required [(ngModel)]="user.fechaNacimiento" #n3="ngModel"></div>
                <div class="col-md-12"><label class="labels">Email</label><input type="email" class="form-control"
                  placeholder="Enter Email" name ="email" required [(ngModel)]="user.email" #n4="ngModel" ></div>           
              </div>
              <div class="row mt-3">
                <div class="col-md-9"><label class="labels">Password</label><input type="password" class="form-control"
                    placeholder="country" value="**************" disabled></div>
                <div class="col-md-3"><label class="labels"></label><ion-button style="white-space:normal !important;
                  word-wrap:break-word;" color="warning" expand="block" (click)="changePassword();">Change Password</ion-button></div>
              </div>
              <ng-container *ngIf="n.errors?.['required'] || n2.errors?.['required'] || n3.errors?.['required'] || n4.errors?.['required']; else enabled">
                <br>
                <div class="row mt-2" style="text-align: center;">
                  <div></div>
                  <div class="col-md-6"><button class="btn btn-primary profile-button" type="submit" disabled>Save</button></div>
                  <div class="col-md-6"><button class="btn btn-secondary" (click)="editProfile = !editProfile" disabled>Cancel</button></div>
                </div>
              </ng-container>
              <ng-template #enabled>
                <br>  
                <div class="row mt-2" style="text-align: center;">
                  <div></div>
                  <div class="col-md-6"><button class="btn btn-primary profile-button" type="submit">Save</button></div>
                  <div class="col-md-6"><button class="btn btn-secondary" (click)="editProfile = !editProfile">Cancel</button></div>
                </div>                
              </ng-template>              
            </form>
          </div>
        </div>    
      </div>
    </div>    

  </ng-template>
</div>
